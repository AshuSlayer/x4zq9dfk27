<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RP Video Lesson</title>
<script type="module" src="assets/js/init.js"></script>
<script type="module" src="assets/js/authcheck.js"></script>
<link rel="stylesheet" href="assets/css/video.css">
<style>
/* Spinner styling */
.spinner {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border: 4px solid rgba(0, 0, 0, 0.1);
    border-top: 4px solid #3498db;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    z-index: 1000;
}

@keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}
</style>
</head>
<body>

<div class="spinner" id="spinner"></div>

<div class="video-player" id="videoPlayer" style="display: none;">
    <!-- Placeholder iframe source, updated by JavaScript -->
    <iframe id="lessonVideo" width="640" height="480" allow="autoplay" allowfullscreen></iframe>
</div>

<script>
// Function to get video ID from URL parameters
function getVideoId() {
    const params = new URLSearchParams(window.location.search);
    return params.get('video');
}

// Set the iframe source based on the video ID
const videoId = getVideoId();
if (videoId) {
    const iframe = document.getElementById('lessonVideo');
    iframe.src = `https://drive.google.com/file/d/${videoId}/preview`;
}

// Wait for the iframe to load, then hide spinner and show video player
document.getElementById('lessonVideo').onload = function() {
    document.getElementById('spinner').style.display = 'none';
    document.getElementById('videoPlayer').style.display = 'block';
};
</script>

</body>
</html>
